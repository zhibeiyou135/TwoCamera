# DVS高反光铝基盘片材质偏置参数配置

## 材质特性分析
高反光铝基盘片具有以下特点：
- **强反射性**：产生强烈的镜面反射
- **高对比度**：反射区域与非反射区域对比度极高
- **光照敏感**：随光源角度变化反射强度变化大
- **边缘锐利**：盘片边缘产生明显的光照跳变

## DVS偏置参数范围
| 参数名 | 功能 | 范围 | 默认值 |
|--------|------|------|--------|
| bias_diff | 差分偏置（推荐不修改） | -25~23 | 0 |
| bias_diff_on | ON事件对比度阈值 | -85~140 | 0 |
| bias_diff_off | OFF事件对比度阈值 | -35~190 | 0 |
| bias_fo | 低通滤波器偏置 | -35~55 | 0 |
| bias_hpf | 高通滤波器偏置 | 0~120 | 0 |
| bias_refr | 不应期偏置 | -20~235 | 0 |

## 配置策略
针对高反光材质的特殊性，需要：
1. 提高ON事件阈值，避免过度触发强反射
2. 适当调整OFF事件阈值，保持边缘检测
3. 增强滤波，减少反射噪声和闪烁
4. 调整不应期，防止快速重复触发

---

## 配置1：保守型（推荐初试）  
**适用场景**：强光环境，需要稳定检测
```json
{
  "dvsBiasConfig": {
    "bias_diff": 5,
    "bias_diff_on": 20,
    "bias_diff_off": 15,
    "bias_fo": 35,
    "bias_hpf": 25,
    "bias_refr": 120
  }
}
```
**特点**：
- 较高的ON/OFF阈值，减少反射噪声
- 强滤波设置，提高稳定性
- 较长不应期，避免重复触发
- 适合初步测试和调试

---

## 配置2：高灵敏度型
**适用场景**：需要捕捉细微运动，光照适中
```json
{
  "dvsBiasConfig": {
    "bias_diff": 0,
    "bias_diff_on": 40,
    "bias_diff_off": 35,
    "bias_fo": 20,
    "bias_hpf": 15,
    "bias_refr": 80
  }
}
```
**特点**：
- 较低阈值，提高灵敏度
- 适度滤波，保持响应速度
- 中等不应期，平衡灵敏度与稳定性
- 适合精密检测应用

---

## 配置3：强滤波型
**适用场景**：反射噪声严重，需要最大稳定性
```json
{
  "dvsBiasConfig": {
    "bias_diff": 10,
    "bias_diff_on": 120,
    "bias_diff_off": 110,
    "bias_fo": 50,
    "bias_hpf": 40,
    "bias_refr": 180
  }
}
```
**特点**：
- 最高阈值设置，抑制强反射
- 最强滤波，消除闪烁和噪声
- 最长不应期，最大稳定性
- 可能有延迟，但最稳定

---

## 配置4：快响应型
**适用场景**：高速运动检测，要求低延迟
```json
{
  "dvsBiasConfig": {
    "bias_diff": -5,
    "bias_diff_on": 30,
    "bias_diff_off": 25,
    "bias_fo": 10,
    "bias_hpf": 8,
    "bias_refr": 50
  }
}
```
**特点**：
- 较低阈值，快速响应
- 弱滤波，最小延迟
- 短不应期，快速连续检测
- 适合动态跟踪应用

---

## 配置5：边缘增强型
**适用场景**：主要检测盘片边缘，忽略表面反射
```json
{
  "dvsBiasConfig": {
    "bias_diff": 8,
    "bias_diff_on": 140,
    "bias_diff_off": 45,
    "bias_fo": 30,
    "bias_hpf": 35,
    "bias_refr": 100
  }
}
```
**特点**：
- ON阈值最高，完全抑制表面反射
- OFF阈值适中，保持边缘检测
- 非对称设置，突出边缘特征
- 适合边缘检测应用

---

## 配置6：自适应型
**适用场景**：光照条件变化大的环境
```json
{
  "dvsBiasConfig": {
    "bias_diff": 3,
    "bias_diff_on": 60,
    "bias_diff_off": 55,
    "bias_fo": 25,
    "bias_hpf": 20,
    "bias_refr": 90
  }
}
```
**特点**：
- 中等偏保守的设置
- 良好的环境适应性
- 平衡的滤波和不应期设置
- 适合多变光照条件

---

## 配置7：极低噪声型
**适用场景**：环境噪声极大，需要极强抑制
```json
{
  "dvsBiasConfig": {
    "bias_diff": 15,
    "bias_diff_on": 130,
    "bias_diff_off": 120,
    "bias_fo": 55,
    "bias_hpf": 50,
    "bias_refr": 200
  }
}
```
**特点**：
- 极高阈值，最强噪声抑制
- 最强滤波组合
- 超长不应期，防止任何误触发
- 适合极端反射环境

---

## 配置8：高速度型
**适用场景**：超高速运动，极低延迟要求
```json
{
  "dvsBiasConfig": {
    "bias_diff": -10,
    "bias_diff_on": 20,
    "bias_diff_off": 15,
    "bias_fo": 0,
    "bias_hpf": 5,
    "bias_refr": 30
  }
}
```
**特点**：
- 极低阈值，最高灵敏度
- 最弱滤波，接近零延迟
- 极短不应期，连续高速检测
- 适合超高速应用（可能有噪声）

---

## 配置9：只提阈值
**适用场景**：
```json
{
  "dvsBiasConfig": {
    "bias_diff": 0,
    "bias_diff_on": 10,
    "bias_diff_off": 10,
    "bias_fo": 0,
    "bias_hpf": 0,
    "bias_refr": 0
  }
}
```

## 测试建议

### 测试顺序
1. **配置1（保守型）** - 建立基准，确认基本功能
2. **配置6（自适应型）** - 测试通用性能
3. **配置2（高灵敏度型）** - 评估检测精度
4. **配置4（快响应型）** - 测试响应速度
5. **配置3（强滤波型）** - 处理噪声问题
6. **配置5（边缘增强型）** - 特殊应用测试
7. **配置7（极低噪声型）** - 极端环境测试
8. **配置8（高速度型）** - 极限性能测试

### 评估指标
- **检测稳定性**：是否有误触发和漏检
- **响应延迟**：事件触发的时间延迟
- **噪声水平**：背景噪声事件数量
- **边缘清晰度**：盘片边缘检测的清晰程度
- **光照适应性**：不同光照条件下的表现
- **动态范围**：能检测的最小和最大运动幅度

### 调试技巧
1. **逐步调整**：每次只改变一个参数
2. **记录数据**：记录每种配置的表现数据
3. **环境控制**：保持测试环境的一致性
4. **多角度测试**：测试不同的光照角度和强度
5. **参数边界测试**：测试参数的极限值效果

### 进阶优化
如果预设配置都不理想，可以基于最接近的配置进行微调：

**细微调整（±5）**：
- `bias_diff_on`: 在-85~140范围内调整ON事件灵敏度
- `bias_diff_off`: 在-35~190范围内调整OFF事件灵敏度

**滤波调整（±3）**：
- `bias_fo`: 在-35~55范围内调整低通滤波强度
- `bias_hpf`: 在0~120范围内调整高通滤波强度

**时序调整（±10）**：
- `bias_refr`: 在-20~235范围内调整不应期长度

**基础调整（±2）**：
- `bias_diff`: 在-25~23范围内微调基础偏置

### 参数含义详解

**阈值参数**：
- `bias_diff_on` 越大 → ON事件越难触发 → 减少亮度增加噪声
- `bias_diff_off` 越大 → OFF事件越难触发 → 减少亮度减少噪声

**滤波参数**：
- `bias_fo` 越大 → 低通滤波越强 → 减少高频噪声，增加延迟
- `bias_hpf` 越大 → 高通滤波越强 → 只保留快速变化，忽略慢变化

**时序参数**：
- `bias_refr` 越大 → 不应期越长 → 同一像素连续事件间隔越长

---

## 配置文件使用方法

将选择的配置参数复制到你的 `dv_dvs.json` 文件中：

```json
{
  "dvDisplay": {
    // ... 其他配置 ...
  },
  "dvsBiasConfig": {
    "bias_diff": 5,
    "bias_diff_on": 80,
    "bias_diff_off": 70,
    "bias_fo": 35,
    "bias_hpf": 25,
    "bias_refr": 120
  },
  "crop": {
    "enabled": true,
    "x": 1649,
    "y": 907,
    "width": 1154,
    "height": 869
  },
  "rotation": {
    "enabled": true,
    "angle": 0.0,
    "border_mode": "reflect",
    "interpolation": "linear"
  }
}
```

重启应用程序使配置生效。 
